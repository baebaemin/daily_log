## Today I Learned

### [React-Query] isFetchedAfterMount

- 쿼리가 현재 컴포넌트 마운트 이후에 네트워크 요청을 통해 fetched 되었을 때 true가 됨
- 캐시된 데이터만 사용한 경우에는 false
- 초기 로딩과 리프레시를 구분할때 유용함 !

```tsx
const {
  const {data, isFetching, isFetchedAfterMount} = useQuery({
    queryKey: ['user', userId],
    queryFn: fetchUser,
  })
};

// 실제 네트워크 요청 후의 데이터만 처리하고 싶을 때
useEffect(() => {
  if (isFetchedAfterMount && data) {
    // 캐시된 데이터가 아닌, 마운트 이후 fetch해온 데이터로만 동작
    updateUserProfile(data);
  }
}, [isFetchedAfterMount, data])
```

- pre-fetching으로 캐싱된 데이터를 활용한 이후 refetchOnWindowFocus 등 모종의 이유로 refetch되었을 때 분석/로깅을 하고 싶다면 isFetchedAfterMount를 함께 사용할 수 있다
