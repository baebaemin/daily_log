## Today I Learned

### [TypeScript] 'never' 타입 에러 메시지의 진짜 의미

```tsx
// Query-Key Factory
export default createQueryKeys("applicants", {
  languageExam: () => ({
    queryKey: ["language-exam"],
    queryFn: () => getLanguageExam(),
    staleTime: Infinity, // error
    gcTime: Infinity, // error
  }),
});
```

- 상황 : 쿼리 키 팩토리에 staleTime, gcTime 옵션을 추가했더니 아래와 같은 에러 로그가 발생했다.

  ```markdown
  > Type 'number' is not assignable to type 'never'.ts(2322)

  > applicants.ts(237, 5): The expected type comes from property 'staleTime' which is declared here on type '{ queryKey: [string]; queryFn: () => Promise<any>; staleTime: never; gcTime: never; }'
  ```

- 처음엔 위와 같은 메세지를 읽었을 때,
  `staleTime`과 `gcTime`이 `never` 타입이기 때문에 Infinity(number 타입)를 할당할 수 없다고 생각했다. 그래서 사용할 수 없도록 never 타입을 지정할거면 왜 명시해둔거지 ㅡ.ㅡ 싶었는데, 알고보니 유효하지 않은 프로퍼티를 작성했을 때 나타나는 구문이었다ㅎㅎ..

  ```tsx
  export default createQueryKeys("applicants", {
    codeListLanguageExam: () => ({
      queryKey: ["codeListLanguageExam"],
      queryFn: () => getApplicantsCodeListLanguageExam(),
      djlffa: Infinity, // 절대 존재하지 않는 프로퍼티로 실험해보면
    }),
  });
  ```

  ```markdown
  > Type 'number' is not assignable to type 'never'.ts(2322)

  > applicants.ts(237, 5): The expected type comes from property 'djlffa' which is declared here on type '{ queryKey: [string]; queryFn: () => Promise<any>; djlffa: never; }'
  ```

- 동일한 패턴의 에러가 발생한다. 존재하지 않는 프로퍼티에 대해서는 never 타입으로 경고하는 방식이므로, TypeScript 에러 메시지에서 never 타입이 나올 때는 "타입 불일치"보다는 `허용되지 않는 프로퍼티`를 의심해봐야겠다 😩
