## Today I Learned

### [TIL-WORDS]

- `SSL`: 웹 브라우저와 웹 서버간의 통신을 암호화하여 개인정보를 보호하는 보안 기술인 Secure Sockets Layer의 약자. ([TLS](/2403/240327.md) 가 더 안전)
  - SSL, TLS가 적용된 웹사이트는 주소창이 `https://`로 시작하고 자물쇠 아이콘이 표시된다

## <br />

### [Next.js] 간혹 개발 모드에서 CSS가 다르게 적용되던 이유

- Next.js는 production build 과정에서 stylesheets를 자동으로 chunking해서 최적화한다. 이때, 코드 내 style import 순서에 따라 CSS 순서가 바뀐다.

- 예시 코드

```tsx
// page.tsx
import { BaseButton } from "./base-button"; // 첫번째 로드
import styles from "./page.module.css"; // 두번째 로드

export default function Page() {
  return <BaseButton className={styles.primary} />;
}
```

```tsx
import styles from "./base-button.module.css"; // 첫번째 로드되는 style

export function BaseButton() {
  return <button className={styles.primary} />;
}
```

- 로드 순서는 BaseButton -> Page

- 만약 두 파일에 같은 속성이 있다면 CSS는 나중에 로드되는 스타일이 우선되므로 red가 반영되게 된다.

```css
/* base-button.module.css */
.primary {
  background: blue;
}

/* page.module.css */
.primary {
  background: red;
}
```

- 근데 개발 환경에서 가끔 blue가 될 수도 있는데, Hot Module Replacement로 CSS가 동적 로드를 하기 때문이다... 파일 수정 순서에 따라 CSS 순서가 바뀔 수 있음 ㄱ-

  - => 같은 명시도의 스타일이 여러 파일에 있으면 예측 불가능하다 !

- CSS 순서를 예측 가능하게 유지하려면 전역 CSS는 루트 layout같은 한 곳에 집중시키고, 컴포넌트별 스타일에는 CSS modules를 사용하는 것이 좋다 (+ 섞어쓰지 않기)

```
app/
├── layout.tsx          → import './globals.css'
├── globals.css         → 전역 스타일
│
└── components/
    ├── button/
    │   ├── button.tsx         → import styles from './button.module.css'
    │   └── button.module.css  → 컴포넌트별 CSS Module
    │
    └── card/
        ├── card.tsx           → import styles from './card.module.css'
        └── card.module.css    → 컴포넌트별 CSS Module
```

- 프로덕션 빌드 `next build`로 최종 CSS 순서를 확인하자

- 참고 링크 : https://nextjs-ko.org/docs/app/building-your-application/styling/stylesheets#ordering-and-merging
