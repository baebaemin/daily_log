## Today I Learned

### [React] useEffect vs useLayoutEffect

- useEffect : 비동기적 실행
  - 화면 렌더링이 완료된 후 혹은 어떤 값이 변경되었을 때 사이드 이펙트를 수행 = DOM 업데이트 이후
  - 이벤트 루프의 태스크 큐에 콜백이 쌓이는 식으로 동작
  ```jsx
  // 컴포넌트가 렌더링 된 후에 실행됨
  useEffect(() => {
    console.log("useEffect 실행");
  }, []);
  ```
- useLayoutEffect : 동기적 실행

  - DOM이 업데이트 되기 전에 실행
  - DOM 조작이나 레이아웃 측정과 같은 작업에 사용

  ```jsx
  // 컴포넌트가 렌더링 된 후에 실행됨
  useLayoutEffect(() => {
    console.log("useLayoutEffect 실행");
  }, []);
  ```

- Next.js와 같은 서버 렌더링을 사용할 경우, 자바스크립트가 모두 다운로드 될 때까지 useEffect와 useLayoutEffect가 실행되지 않는다. 따라서 서버 컴포넌트에서 useLayoutEffect를 사용하는 경우, React에서 경고를 띄운다.

  ```js
  // 오직 클라이엔트에서만 실행
  Warning: useLayoutEffect does nothing on the server, because its effect cannot be encoded into the server renderer's output format. This will lead to a mismatch between the initial, non-hydrated UI and the intended UI. To avoid this, useLayoutEffect should only be used in components that render exclusively on the client. See <https://fb.me/react-uselayouteffect-ssr> for common fixes.
  ```
