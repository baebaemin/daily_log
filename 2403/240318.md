## Today I Learned ğŸ¥¹

### [TIL-WORDS]

- `superseded` : ëŒ€ì²´ë¨
- `ì¸ìˆ˜`ì™€ `ì¸ì`ì˜ ì°¨ì´?

  - `ì¸ìˆ˜` : í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•  ë•Œ ê±´ë„¤ì£¼ëŠ” ë³€ìˆ˜ (=Argument)
  - `ì¸ì` : í•¨ìˆ˜ì—ì„œ ì •ì˜ë˜ì–´ ì‚¬ìš©ë˜ëŠ” ë³€ìˆ˜ (=ë§¤ê°œë³€ìˆ˜, Parameter)

  ```javascript
  let num = 1;
  function add10(num) {
    // ì¸ì
    return (num += 10);
  }

  add10(num); // ì¸ìˆ˜
  ```

### [React] React Hook cannot be called inside a callback

ì°¸ê³ ë§í¬ : https://velog.io/@ybw903/React-Hook-%EC%95%8C%EC%95%84%EB%B3%B4%EA%B8%B0

---

### [DEBUG] react-query focusì‹œ refetch ë°©ì§€í•˜ê¸° (í‘)

- `ë¬¸ì œ ìƒí™©` : ì‚¬ìš©ìì˜ í”„ë¡œí•„ì„ ì…ë ¥í•˜ëŠ” ëª¨ë‹¬ì´ í™œì„±í™”ë˜ì–´ìˆê³ , ì •ë³´ ì…ë ¥ ì¤‘ ë¸Œë¼ìš°ì €ë¥¼ ì´íƒˆí•˜ë©´(tab ë³€ê²½ / ì°½ ìµœì†Œí™” / ë°°ê²½í™”ë©´ í´ë¦­) ì‘ì„± ì¤‘ì´ë˜ ì •ë³´ê°€ ëª¨ë‘ ì‚¬ë¼ì§„ë‹¤.
- `ëª©í‘œ` : browserë¥¼ ì´íƒˆí•´ë„ ì‘ì„± ì¤‘ì´ë˜ ì •ë³´ë¥¼ ì´ì–´ì„œ ì…ë ¥í•  ìˆ˜ ìˆë„ë¡ ì •ë³´ê°€ ë‚¨ì•„ìˆì–´ì•¼ í•œë‹¤.
- `ì§„ë•€ ë¡œê·¸` :

  - [1] ì–´ë–¤ ì»´í¬ë„ŒíŠ¸ë¡œë¶€í„°, ë¬´ìŠ¨ ì´ìœ ë¡œ ë¦¬ë Œë”ë§ì´ ë˜ê³  ìˆëŠ”ê±´ì§€ íŒŒì•…í•˜ê¸°

    - [1-1] ì–´ë””ì„œ?? - <i> GlobalModal / CertainModal / form / Modalì„ ì—´ê³  ìˆëŠ” í˜ì´ì§€ ... </i>
      - ğŸ‘‰ ê°™ì€ ëª¨ë‹¬ì„ ì¬ì‚¬ìš©í•˜ê³  ìˆëŠ” ë‹¤ë¥¸ pageì—ì„œëŠ” ë¦¬ë Œë”ë§ì´ ë˜ì§€ ì•Šì•˜ë‹¤.
      - ğŸ‘‰ console.logë¡œ ë””ë²„ê¹…í•˜ë©´ì„œ í™•ì¸í•´ë³´ë‹ˆ í•´ë‹¹ page ì»´í¬ë„ŒíŠ¸ ìì²´ê°€ ë¦¬ë Œë”ë§ ë˜ê³  ìˆì—ˆë‹¤.
      - ğŸ‘‰ modalì€ ì—´ë¦° ì±„ fieldì˜ ë°ì´í„°ë§Œ ì‚¬ë¼ì¡Œê¸° ë•Œë¬¸ì— modalì—ì„œ ë¦¬ë Œë”ë§ ì´ìŠˆê°€ ë°œìƒí•œë‹¤ê³  ìƒê°í–ˆëŠ”ë°, isModalOpenì˜ ê°’ì€ ì´ˆê¸°í™”ë˜ì§€ ì•Šì•˜ê¸° ë•Œë¬¸ì´ì—ˆë‹¤.
    - [1-2] ë¬´ìŠ¨ ì´ìœ ë¡œ?? - <i> states ë³€ê²½ / props ë³€ê²½ / ë¶€ëª¨ ì»´í¬ë„ŒíŠ¸ì˜ ë¦¬ë Œë”ë§ / `useSyncExternalStore`ê°€ êµ¬ë…ì¤‘ì¸ store ê°’ì˜ ë³€ê²½ ... </i>
      - ğŸ‘‰ í•´ë‹¹ pageëŠ” Next.jsë¡œ ë¼ìš°íŒ… ì¤‘ì´ì—ˆê¸°ì— ê·¸ ìì²´ë¡œ entry pointë¼ì„œ (\_app.tsxë¥¼ ì œì™¸í•˜ë©´) ë¶€ëª¨ ì»´í¬ë„ŒíŠ¸ë„ ì—†ê³ , propsë¥¼ ë°›ê³  ìˆì§€ë„ ì•Šì•˜ë‹¤.
      - ğŸ‘‰ ì´ë¯¸ zustandë¡œ ìƒíƒœ ê´€ë¦¬ì™€ store êµ¬ë…ì„ í•˜ê³ ìˆì—ˆê¸° ë•Œë¬¸ì— `useSyncExternalStore` í›…ì€ ì‚¬ìš©í•˜ì§€ ì•Šì•˜ë‹¤.
      - ğŸ‘‰ í•œ ì¤„ì”© (ì—­ì‹œë‚˜ console.logë¡œ... ğŸ™„) ê¸°ì¡´ ì½”ë“œë¥¼ ì—†ì• ê°€ë©´ì„œ ì–¸ì œ ë¦¬ë Œë”ë§ì´ ë˜ëŠ”ì§€ íŒŒì•…í•˜ë‹¤ê°€, ì‚¬ìš©ìì˜ ì •ë³´ë¥¼ ê°€ì ¸ì˜¤ëŠ” ì¿¼ë¦¬ë¥¼ ì‚¬ìš©í•˜ëŠ” custom Hookìœ¼ë¡œë¶€í„° ê°€ì ¸ì˜¤ëŠ” dataë¥¼ ì •ì˜í•˜ëŠ” ì½”ë“œ í•œ ì¤„ì„ ì£¼ì„ ì²˜ë¦¬í•˜ë‹ˆ ë¦¬ë Œë”ë§ì´ ë°œìƒí•˜ì§€ ì•Šì•˜ë‹¤.

  - [2] ë¦¬ì•¡íŠ¸ ì¿¼ë¦¬ ì»¤ìŠ¤í…€ í›… ë‚´ë¶€ ì‚´í´ë³´ê¸°
    - í•´ë‹¹ í›…ì€ í”„ë¡œí•„ ë°ì´í„°ë¥¼ ì´ˆê¸°í™”í•˜ëŠ” ì—­í• ìœ¼ë¡œ, store êµ¬ë…ê³¼ ë˜ ë‹¤ë¥¸ ì¿¼ë¦¬ í›…ì„ í™œìš©í•˜ê³  ìˆì—ˆë‹¤.
      - [2-1] ì‚½ì§ˆ1: `onSuccess`ê°€ deprecated ë˜ì—ˆì—ˆë‹¤ëŠ” ì •ë³´ë¥¼ ë“¤ì€ ë°” ìˆì–´ ëŒ€ì‹  useEffectë¥¼ í™œìš©í•˜ëŠ” ë°©ë²•ìœ¼ë¡œ ëŒ€ì²´í•´ë³´ê¸°
      - [2-2] ì‚½ì§ˆ2: console.log(ë˜ì†”ë¡œê·¸...)ë¡œ useCustomHook.jsì˜ get ì¿¼ë¦¬ê°€ ì–¸ì œ 'ì‹¤í–‰'ë˜ëŠ”ì§€ ì²´í¬í•´ë´¤ì§€ë§Œ, fetchingí•´ì˜¤ëŠ” dataê°€ ë°”ë€Œì–´ë„ ë‹¨ í•œ ë²ˆë§Œ ë¡œê·¸ì— ì°í˜”ë‹¤. ì§€ê¸ˆ ìƒê°í•´ë³´ë©´ ì´ê²Œ ë‹¹ì—°í•œë°... í•´ë‹¹ js ìŠ¤í¬ë¦½íŠ¸ëŠ” í•œ ë²ˆ ëŒì•„ê°€ê³  ë§ í…Œë‹ˆê¹Œ.. fetching ë ë•Œë§ˆë‹¤ ë§ˆì¹˜ state ê°’ì´ ì´ˆê¸°í™”ë˜ì–´ ì»´í¬ë„ŒíŠ¸ê°€ ë¦¬ë Œë”ë§ ë˜ëŠ” ê²ƒì²˜ëŸ¼ jsë„ ì¬ì‹¤í–‰ë˜ì–´ ë¡œê·¸ì— ì°íê±°ë¼ê³  ìƒê°í–ˆë‚˜ë³´ë‹¤ ğŸ˜“
  - [3] ì‚½ì§ˆ3: `visibilitychange` ë§‰ê¸°
    - ì•„ì˜ˆ ì‚¬ìš©ìê°€ ë¸Œë¼ìš°ì €ë¥¼ ì´íƒˆí–ˆìŒì„ ëª¨ë¥´ê²Œ í•˜ë©´ refetchë„ ì•ˆ í•  ê²ƒ ê°™ì•„ì„œ ì´íƒˆ ì´ë²¤íŠ¸ë¥¼ ë§‰ì•„ë³´ë ¤ í–ˆë‹¤.
    - ì´ê³³(https://nomo.asia/424)ì— ì“°ì¸ ë°©ë²•ê³¼ mdnì„ ë’¤ì ¸ ë‹¤ ì ìš©í•´ë³´ì•˜ì§€ë§Œ...? ë˜ì§€ ì•Šì•˜ë‹¤.
  - [4] ì‚½ì§ˆ4: ì…ë ¥ì¤‘ì´ë˜ formì„ storeë‚˜ sessionStorageì— ì €ì¥í•˜ê¸°
    - ë‹¤í–‰íˆ ìƒê°ì— ê·¸ì¹˜ê¸°ë§Œ í•œ ìµœí›„ì˜ ë¹„íš¨ìœ¨ ë°©ë²• ...

- í•´ê²° ë°©ë²•: Performance Tabì„ í™œìš©í•´ì„œ refetchê°€ ì •í™•íˆ ì–´ë””ì„œ ì–¸ì œ ë˜ê³  ìˆëŠ”ì§€ ì•Œì•„ë³´ê¸°

---

### [React-Query] ì™¸ë¶€ë¡œë¶€í„° ì˜µì…˜ ê°’ì„ ë°›ì•„ ì‚¬ìš©í•˜ëŠ” ë¦¬ì•¡íŠ¸ ì¿¼ë¦¬ì˜ ì»¤ìŠ¤í…€ í›… ì‘ì„±í•˜ê¸°

- options ê°ì²´ë¥¼ ì¸ìë¡œ ë°›ë„ë¡ ì„¤ì •í•˜ê³ , ì¸ìê°€ ì „ë‹¬ë˜ì§€ ì•Šê±°ë‚˜ ê°’ì´ ì§€ì •ë˜ì§€ ì•Šì•˜ì„ ë• ê¸°ë³¸ê°’ìœ¼ë¡œ trueë¥¼ ì‚¬ìš©í•˜ê²Œ ì„¤ì •í•œë‹¤.

```javascript
// .../hooks/useInfoQuery.js
export default function useInfoQuery(options = {}) {
    const queryClient = useQueryClient();
    const { infoType } = useMyStore((state) => state);

    const { data } = useQuery(["getInfoKey"], getInfo), {
        enabled: Boolean(infoType === "user"), // useQueryë¥¼ ë™ê¸°ì ìœ¼ë¡œ ì‚¬ìš©
        staleTime: 6000, // 6000ms ì´ë‚´ì—ëŠ” ìºì‹œëœ ê²°ê³¼ë¥¼ ì‚¬ìš©
        refetchOnWindowFocus: options.refetchOnWindowFocus !== undefined ? options.refetchOnWindowFocus : true, // backgroundì— ìˆì„ì‹œ fresh dataë¥¼ ìë™ìœ¼ë¡œ ìš”ì²­
        onSuccess: ((data) => {
            queryClient.setQueriesData["getInfoKey"], () => {
                return data.data.body;
            }
        })
    }
}

```

---

### [React-Query] enabled

- ì°¸ê³  ë§í¬ : https://kyounghwan01.github.io/blog/React/react-query/basic/#api

---

### [React-Query] StaleTime & CacheTime

- ì°¸ê³  ë§í¬ : https://growing-jiwoo.tistory.com/103

---

### [React-Query] deprecatedëœ onSuccessì™€ onError

- onSuccess | ì°¸ê³  ë§í¬ : https://tkdodo.eu/blog/breaking-react-querys-api-on-purpose#the-callbacks-might-not-run
- onError | ì°¸ê³  ë§í¬ : https://xionwcfm.tistory.com/366

---

### [React-Query] Window Focus Refetching

- ì°¸ê³  ë§í¬ : https://tanstack.com/query/v4/docs/framework/react/guides/window-focus-refetching

---

### [JavaScript] !!

- Truthy, Falsyí•œ ê°’ì„ í¬í•¨í•˜ëŠ” ë‹¤ë¥¸ íƒ€ì…ì˜ ë°ì´í„°ë¥¼ ë°˜ëŒ€ì˜ Boolean íƒ€ì…ìœ¼ë¡œ ë³€í™˜í•œ í›„, í•œ ë²ˆ ë” ë°˜ëŒ€ê°’ìœ¼ë¡œ ë³€í™˜.
- `!!`ë³´ë‹¤ëŠ” `!`valueì— í•œ ë²ˆ ë” `!`ë¥¼ ë¶™ì˜€ë‹¤ê³  ìƒê°í•˜ë©´ ì¢‹ì„ ê²ƒ ê°™ë‹¤.

  ```javascript
  ("str"); //true("str")
  !"str"; //false
  !!"str"(
    //true

    ""
  ); //false("")
  !""; //true
  !!""; //false

  true; //true
  !true; //false
  !!true; //true

  NaN; //false(NaN)
  !NaN; //true
  !!NaN; //false

  undefined; //false(undefined)
  !undefined; //true
  !!undefined; //false

  null; //false(null)
  !null; //true
  !!null; //false

  0; //false(0)
  !0; //true
  !!0; //false

  777; //true(777)
  !777; //false
  !!777; //true
  ```

- ì°¸ê³  ë§í¬ : https://ifuwanna.tistory.com/278
- ì°¸ê³  ë§í¬2 : https://stackoverflow.com/questions/10467475/double-negation-in-javascript-what-is-the-purpose
