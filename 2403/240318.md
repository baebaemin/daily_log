## Today I Learned

### [React] React Hook cannot be called inside a callback

참고링크 : https://velog.io/@ybw903/React-Hook-%EC%95%8C%EC%95%84%EB%B3%B4%EA%B8%B0

---

### [Debugging] react-query focus시 refetch 방지하기 (흑흑 뿌듯했다)

- 문제 상황:
- 삽질 로그:
- 해결 방법:
- 활용: Performance Tab

---

### [React-Query] 외부로부터 옵션 값을 받아 사용하는 리액트 쿼리의 커스텀 훅 작성하기

- options 객체를 인자로 받도록 설정하고, 인자가 전달되지 않거나 값이 지정되지 않았을 땐 기본값으로 true를 사용하게 설정한다.

```javascript
// .../hooks/useInfoQuery.js
export default function useInfoQuery(options = {}) {
    const queryClient = useQueryClient();
    const { infoType } = useMyStore((state) => state);

    const { data } = useQuery(["getInfoKey"], getInfo), {
        enabled: Boolean(infoType === "user"), // useQuery를 동기적으로 사용
        staleTime: 6000, // 6000ms 이내에는 캐시된 결과를 사용
        refetchOnWindowFocus: options.refetchOnWindowFocus !== undefined ? options.refetchOnWindowFocus : true, // background에 있을시 fresh data를 자동으로 요청
        onSuccess: ((data) => {
            queryClient.setQueriesData["getInfoKey"], () => {
                return data.data.body;
            }
        })
    }
}

```

---

### [React-Query] enabled

- 참고 링크 : https://kyounghwan01.github.io/blog/React/react-query/basic/#api

---

### [React-Query] StaleTime & CacheTime

- 참고 링크 : https://growing-jiwoo.tistory.com/103

---

### [React-Query] deprecated된 onSuccess와 onError

- onSuccess | 참고 링크 : https://tkdodo.eu/blog/breaking-react-querys-api-on-purpose#the-callbacks-might-not-run
- onError | 참고 링크 : https://xionwcfm.tistory.com/366

---

### [React-Query] Window Focus Refetching

- 참고 링크 : https://tanstack.com/query/v4/docs/framework/react/guides/window-focus-refetching

---

### [JavaScript] !!

- Truthy, Falsy한 값을 포함하는 다른 타입의 데이터를 반대의 Boolean 타입으로 변환한 후, 한 번 더 반대값으로 변환.
- `!!`보다는 `!`value에 한 번 더 `!`를 붙였다고 생각하면 좋을 것 같다.

  ```javascript
  ("str"); //true("str")
  !"str"; //false
  !!"str"(
    //true

    ""
  ); //false("")
  !""; //true
  !!""; //false

  true; //true
  !true; //false
  !!true; //true

  NaN; //false(NaN)
  !NaN; //true
  !!NaN; //false

  undefined; //false(undefined)
  !undefined; //true
  !!undefined; //false

  null; //false(null)
  !null; //true
  !!null; //false

  0; //false(0)
  !0; //true
  !!0; //false

  777; //true(777)
  !777; //false
  !!777; //true
  ```

- 참고 링크 : https://ifuwanna.tistory.com/278
