## TODAY I LEARNED

### [error] build error

```javascript
// (monorepo í•˜ìœ„ í”„ë¡œì íŠ¸)/.../api/status/route.ts
import { NextResponse } from "next/server";

export function GET(): NextResponse {
  return NextResponse.json({ message: "Hello World" }, { status: 200 });
}
```

ì—ì„œ buildì‹œ ì—ëŸ¬ê°€ ë‚¬ë‹¤.

```bash
Type error: Type 'OmitWithTag<typeof import("C:/Users/user/Desktop/hipe/biz-platform/apps/hipe/src/app/api/status/route"), "GET" | "HEAD" | "OPTIONS" | "POST" | "PUT" | "DELETE" | "PATCH" | "config" | "generateStaticParams" | ... 6 more ... | "maxDuration", "">' does not satisfy the constraint '{ [x: string]: never; }'.
  Property 'GET' is incompatible with index signature.
    Type '() => NextResponse<unknown>' is not assignable to type 'never'.

   6 |
   7 | // Check that the entry is a valid entry
>  8 | checkFields<Diff<{
     |             ^
   9 |   GET?: Function
  10 |   HEAD?: Function
  11 |   OPTIONS?: Function
```

ì›ì¸ì€ ë‹¤ì–‘í–ˆë‹¤.

1. https://nextjs.org/docs/pages/building-your-application/configuring/eslint#migrating-existing-config

Pages Router í˜ì´ì§€ ê¸°ì¤€ìœ¼ë¡œ ì„¤ëª…ë˜ê³  ìˆì–´ì„œ NextResponseë¥¼ ì°¾ì•„ë³´ì•˜ë‹¤

2. https://nextjs.org/docs/app/api-reference/functions/next-response

```javascript
import { NextResponse } from "next/server";

export async function GET(request: Request) {
  return NextResponse.json({ error: "Internal Server Error" }, { status: 500 });
}
```

ì´ë ‡ê²Œ ì í˜€ì ¸ìˆëŠ”ë° .. requestëŠ” ì‚¬ìš© ì•ˆ í•˜ë‹ˆê¹Œ ì§€ìš°ê³ 
eslint ë£°ì— ë§ì¶° ì½”ë“œë¥¼ ìˆ˜ì •í–ˆë‹¤.

```javascript
import { NextResponse } from "next/server";

// eslint-disable-next-line require-await
export async function GET() {
  return NextResponse.json({ message: "Hello World" }, { status: 200 });
}

export default {};
```

3. tsconfig.json ë³€ê²½í•˜ê¸°

- ë¹Œë“œ íŒŒì¼ì´ ìƒì„±ë˜ëŠ” .nextì—ì„œ ì˜¤ë¥˜ê°€ ë‚˜ê³  ìˆì„ ìˆ˜ë„ ìˆìœ¼ë‹ˆ í•´ë‹¹ í´ë”ë¥¼ excludeí•œë‹¤. (ê¸°ì¡´ì—” distë¡œ í•˜ê³  ìˆì—ˆë‹¤.)

```json
  "exclude": ["node_modules", ".next"]
```

---

### [error] parsing error

- ëª¨ë…¸ë ˆí¬ í•˜ìœ„ í”„ë¡œì íŠ¸ì˜ .eslintrc.js ì˜µì…˜

```js
parserOptions: {
    ecmaVersion: "latest",
    sourceType: "module",
    project: ["./tsconfig.base.json", "./apps/hipe/tsconfig.json"],
    tsconfigRootDir: __dirname,
  },
```

- ìœ„ì™€ ê°™ì´ ì„¤ì •ë˜ì–´ìˆì—ˆëŠ”ë° `Error: Parsing error: Cannot read file '/app/apps/hipe/tsconfig.base.json'` ì´ë¼ëŠ” ì—ëŸ¬ê°€ ë–´ë‹¤. ì¶”ì¸¡ì´ì§€ë§Œ ğŸ¤” ì„œë²„ì—ì„œ ë¹Œë“œì‹œ í´ë”ë¥¼ ëŒë©´ì„œ ìƒëŒ€ê²½ë¡œë¡œ ì§€ì •ëœ í•´ë‹¹ tsconfigë“¤ì„ ëª»ì°¾ëŠ” ê²ƒ ê°™ë‹¤.
- í•´ê²° ë°©ë²• : ì´ì „ monorepoì˜ eslintrcë¥¼ ì°¸ê³ í•´ë³´ë‹ˆ next.jsë¥¼ extendsí•˜ê³  ìˆì—ˆë‹¤.

```js
const project = ["tsconfig.json"].map((f) => resolve(process.cwd(), f));

//...

  parserOptions: {
    ecmaVersion: "latest",
    sourceType: "module",
    project: ["./tsconfig.base.json", ...project],
    tsconfigRootDir: __dirname,
  },
```

- `process.cwd()` :node ëª…ë ¹ì„ í˜¸ì¶œí•œ ë””ë ‰í† ë¦¬ì˜ ì ˆëŒ€ ê²½ë¡œ
- `resolve()` : ê²½ë¡œë¥¼ ë¬¶ì–´ ìƒˆë¡œìš´ ê²½ë¡œë¥¼ ë°˜í™˜
