## TODAY I LEARNED

### [TIL-word]

- `blocking` : ë™ê¸° ì²˜ë¦¬.

- `non-blocking` : ë¹„ë™ê¸° ì²˜ë¦¬. ìš”ì²­ì„ ëª¨ë‘ ì ‘ìˆ˜í•˜ê³  ì‘ë‹µì„ ê¸°ë‹¤ë¦¬ëŠ” ë™ì•ˆ ë‹¤ë¥¸ ì‘ì—…ì„ í•  ìˆ˜ ìˆê²Œ í•˜ì—¬ ë¹¨ë¦¬ ì™„ë£Œëœ ìˆœì„œëŒ€ë¡œ ì²˜ë¦¬. Node.jsì—ì„œëŠ” íŒŒì¼ ì‹œìŠ¤í…œ ì ‘ê·¼ì´ë‚˜ ë„¤íŠ¸ì›Œí¬ ìš”ì²­ ê°™ì€ `I/O ì‘ì—…`ì„ ë…¼ë¸”ë¡œí‚¹ìœ¼ë¡œ ì²˜ë¦¬í•œë‹¤. ì´ëŸ¬í•œ ê³¼ì •ì—ì„œ ì´ë²¤íŠ¸ ë£¨í”„ë¥¼ ì‚¬ìš©í•˜ì—¬ ì„œë²„ì˜ ì „ì²´ì ì¸ ì‘ë™ì„ ë©ˆì¶”ê²Œ í•˜ì§€ ì•ŠëŠ”ë‹¤. (ì°¸ê³ ë§í¬ : [here](https://velog.io/@newsilver1028/Node.js-study-3%EC%A3%BC%EC%B0%A8-%EB%B9%84%EB%8F%99%EA%B8%B0-non-blocking-IO-single-thread-%EC%BD%9C%EC%8A%A4%ED%83%9D-%EC%9D%B4%EB%B2%A4%ED%8A%B8-%EB%A3%A8%ED%94%84-%EB%A9%94%EC%84%B8%EC%A7%80-%ED%81%90))

- `I/O(Input/Output) ë©”ì„œë“œ`
  - Programmed I/O : CPUê°€ ìš”ì²­ì„ ì¼ì¼íˆ ì²˜ë¦¬. ì£¼ë¡œ í‚¤ë³´ë“œ, ë§ˆìš°ìŠ¤ ì…ë ¥ì²˜ëŸ¼ ë‹¨ìˆœí•œ ì—°ì‚°ë§Œ ì²˜ë¦¬
  - Interrupt : I/O ì‘ì—…ì´ ëë‚¬ìŒì„ CPUì—ê²Œ ì•Œë¦¼
  - DMA(Direct Memory Access) : ëŒ€ëŸ‰ì˜ ë°ì´í„°ë¥¼ ì „ì†¡í•  ë•Œ ê³„ì† Interruptí•˜ëŠ” ê²ƒì´ ì•„ë‹ˆë¼ DMA Controllerê°€ ì´ë¥¼ ëŒ€ì‹  ìˆ˜í–‰í•˜ê³  ë§ˆì§€ë§‰ì— Interruptë¥¼ ê±¸ì–´ì£¼ëŠ” ë°©ì‹ (ì°¸ê³ ë§í¬ : https://velog.io/@milkbottle0305/%EC%9A%B4%EC%98%81%EC%B2%B4%EC%A0%9C-12-IO-Systems)
- `ë¹„ë™ê¸° ì‘ì—…ì˜ ì½œë°±í•¨ìˆ˜` : ì‘ì—… ìš”ì²­ ì´í›„ ì™„ë£Œì‹œ ê²°ê³¼ë‚˜ ì˜¤ë¥˜ ì •ë³´ì™€ í•¨ê»˜ ìë™ìœ¼ë¡œ í˜¸ì¶œëœë‹¤. ì´ë¥¼ í†µí•´ ë¹„ë™ê¸° ì‘ì—…ì˜ ê²°ê³¼ë¥¼ ì²˜ë¦¬í•œë‹¤.

- `batch` : ë°ì´í„°ë¥¼ ì‹¤ì‹œê°„ìœ¼ë¡œ ì²˜ë¦¬í•˜ëŠ”ê²Œ ì•„ë‹ˆë¼, ì¼ê´„ì ìœ¼ë¡œ ëª¨ì•„ì„œ í•œ ë²ˆì— ì²˜ë¦¬í•˜ëŠ” ì‘ì—…

</br></br>

---

### [Node.js] non-blocking I/O

- Node.jsëŠ” ì‹±ê¸€ìŠ¤ë ˆë“œ ë…¼ë¸”ë¡œí‚¹ ëª¨ë¸ë¡œ êµ¬ì„±ë˜ì–´ ìˆë‹¤.
- Node.jsì˜ ëª¨ë“  I/O ë©”ì„œë“œëŠ” ë…¼ë¸”ë¡œí‚¹ì¸ ë¹„ë™ê¸° ë°©ì‹ì„ ì œê³µí•˜ê³  ì½œë°± í•¨ìˆ˜ë¥¼ ë°›ëŠ”ë‹¤.
- `ë…¼ë¸”ë¡œí‚¹ I/O ëª¨ë¸`ì€ ë¸”ë¡œí‚¹ ì‘ì—…ë“¤ì„ ë°±ê·¸ë¼ìš´ë“œì—ì„œ ìˆ˜í–‰í•˜ê³ , ì´ë¥¼ ë¹„ë™ê¸° ì½œë°±í•¨ìˆ˜ë¡œ ì´ë²¤íŠ¸ ë£¨í”„ì— ì „ë‹¬í•˜ëŠ” ê²ƒì´ë‹¤.

  ```javascript
  const fs = require("fs");

  fs.readFile("/path/to/file", "utf8", function (err, data) {
    if (err) {
      console.error("Error!");
    } else {
      console.log("Success: ", data);
    }
  });

  console.log("Reading File...");
  ```

- ìœ„ì˜ ì½”ë“œì—ì„œ readFile í•¨ìˆ˜ëŠ” ë¹„ë™ê¸°ì ìœ¼ë¡œ íŒŒì¼ì„ ì½ìœ¼ë©°, íŒŒì¼ ì½ê¸°ê°€ ëë‚˜ë©´ ê²°ê³¼ì— ë”°ë¼ ë‹¤ë¥¸ ë©”ì„¸ì§€ë¥¼ ì¶œë ¥í•˜ëŠ” ì½œë°± í•¨ìˆ˜ë¥¼ ì‹¤í–‰í•œë‹¤. readFile í˜¸ì¶œì´ ë¸”ë¡œí‚¹ ë˜ì§€ ì•Šìœ¼ë¯€ë¡œ, "Reading File..." ë©”ì‹œì§€ê°€ íŒŒì¼ì´ ì½íˆëŠ” ë™ì•ˆ ì¶œë ¥ëœë‹¤.

---

### [React 18] startTransition

- `startTransition(() => {})`

- state updateë¥¼ transitionì¸ ìƒíƒœë¡œ ë³€í™˜

- ì¸ìë¡œ ë“¤ì–´ê°€ëŠ” scopeì—ëŠ” set ê¸°ëŠ¥ì´ callingë˜ì–´ stateê°€ update ë˜ëŠ” ê¸°ëŠ¥ì„ í¬í•¨ (ê·¸ëŸ¬ë¯€ë¡œ set functionì— ì ‘ê·¼ ê°€ëŠ¥í•´ì•¼ í•œë‹¤ => ì¼ë¶€ propsë‚˜ custom Hook ë°˜í™˜ê°’ì— ëŒ€í•œ ì‘ë‹µìœ¼ë¡œ `Transition`ì„ ì‹œì‘í•˜ë ¤ë©´ `useDefferedValue`ë¥¼ ì‚¬ìš© = ê°’ì—ë§Œ ì ‘ê·¼ ê°€ëŠ¥í•  ë•Œ)

- scope functionì„ `Transition`ìœ¼ë¡œ call í•˜ì—¬ ì¸ìì—†ì´ ë°”ë¡œ ì‹¤í–‰ -> ë™ê¸° ì‘ì—… ìŠ¤ì¼€ì¤„ ì—…ë°ì´íŠ¸

- `Transition`ì´ ì§„í–‰ì¤‘ì„ì„ ì‚¬ìš©í•˜ë ¤ë©´ `useTransition`ì„ ì‚¬ìš©

- `startTransition`ì— ì „ë‹¬ë˜ëŠ” í•¨ìˆ˜ëŠ” ì¦‰ì‹œ ì‹¤í–‰ë˜ì–´ ëª¨ë“  stateë¥¼ `Transition`ìœ¼ë¡œ í‘œê¸°í•˜ë¯€ë¡œ ë™ê¸°ì‹ì´ì–´ì•¼ í•œë‹¤. ì‹œê°„ì°¨ë¡œ ë” ë§ì€ state ì—…ë°ì´íŠ¸ë¥¼ ìˆ˜í–‰í•˜ë ¤ í•˜ë©´ (ex. Timeout) `Transition`ìœ¼ë¡œ í‘œì‹œë˜ì§€ ì•ŠëŠ”ë‹¤.

- `Transition`ìœ¼ë¡œ markingëœ stateì˜ ì—…ë°ì´íŠ¸ëŠ” ë‹¤ë¥¸ state ì—…ë°ì´íŠ¸ì— ì˜í•´ ì¤‘ë‹¨ë  ìˆ˜ ìˆë‹¤. ë§Œì•½ Transition ì•ˆì—ì„œ íŠ¹ì • ì»´í¬ë„ŒíŠ¸ë¥¼ ì—…ë°ì´íŠ¸í•˜ëŠ” ì¤‘ ë¦¬ë Œë”ë§ë˜ëŠ” ë™ì•ˆ ì…ë ¥ì„ ì‹œì‘í•˜ë©´ ReactëŠ” input state ì—…ë°ì´íŠ¸ ì´í›„ ë Œë”ë§ì„ ì´ì–´ì„œ ì§„í–‰í•œë‹¤.

- `Transition` ì—…ë°ì´íŠ¸ëŠ” í…ìŠ¤íŠ¸ ì…ë ¥ì„ ì œì–´í•˜ëŠ” ë° ì‚¬ìš©ë  ìˆ˜ ì—†ë‹¤.

- í˜„ì¬ì˜ ReactëŠ” ì§„í–‰ì¤‘ì¸ `Transition`ì´ ì—¬ëŸ¬ ê°œì¼ ê²½ìš°ì— ì¼ê´„ì²˜ë¦¬í•˜ë‚˜ í–¥í›„ ë¦´ë¦¬ì¦ˆì—ì„œëŠ” ë³€ê²½ë  ê°€ëŠ¥ì„±ì´ ë†’ë‹¤.

```javascript
import { startTransition } from "react";

function TabContainer() {
  const [tab, setTab] = useState("about");

  function selectTab(nextTab) {
    startTransition(() => {
      setTab(nextTab);
    });
  }
  //...
}
```

- ì™œ ì‚¬ìš©í• ê¹Œ? ğŸ¤” :

  1. ëŠë¦° ë””ë°”ì´ìŠ¤ì—ì„œë„ UI ì—…ë°ì´íŠ¸ì˜ ë°˜ì‘ì„±ì„ ìœ ì§€í•  ìˆ˜ ìˆë‹¤.
  2. ë¦¬ë Œë”ë§ ì¤‘ì¼ë•Œë„ UIê°€ ë°˜ì‘í•  ìˆ˜ ìˆë‹¤. ì˜ˆë¥¼ë“¤ë©´, ì‚¬ìš©ìê°€ íƒ­ì„ í´ë¦­í–ˆë‹¤ê°€ ë§ˆìŒì´ ë°”ë€Œì–´ ë‹¤ë¥¸ íƒ­ì„ ëˆ„ë¥¸ë‹¤ë©´ ì²« ë²ˆì§¸ ë¦¬ë Œë”ë§ì´ ëë‚˜ê¸°ë¥¼ ê¸°ë‹¤ë¦´ í•„ìš”ê°€ ì—†ë‹¤.

- startTransitionì€ useTransitionì—ì„œ isPending flagë¥¼ ì‚¬ìš©í•  í•„ìš”ê°€ ì—†ê±°ë‚˜ components ë°”ê¹¥ì—ì„œ í˜¸ì¶œí•´ì•¼í•  ê²½ìš° ì‚¬ìš©í•˜ë©´ ì¢‹ë‹¤.

- ì°¸ê³ ë§í¬ 1 : https://react.dev/reference/react/startTransition

---

### [React 18] useTransition

- UI ë³€ê²½ì„ ê°€ë¡œë§‰ì§€ ì•Šê³  ìƒíƒœë¥¼ ì—…ë°ì´íŠ¸í•  ìˆ˜ ìˆë„ë¡ ë„ì™€ì£¼ëŠ” í›…
- ìƒíƒœ ì—…ë°ì´íŠ¸ë¥¼ ê¸´ê¸‰í•˜ì§€ ì•Šì€ ê²ƒìœ¼ë¡œ ê°„ì£¼í•´ ë¬´ê±°ìš´ ë Œë”ë§ ì‘ì—…ì„ ì¡°ê¸ˆ ë¯¸ë£¬ë‹¤.

```javascript
const [isPending, startTransition] = useTransition();
```

- `isPending`: Transitionì´ ì§„í–‰ì¤‘ì¸ê°€ì— ëŒ€í•œ booleanê°’
- `startTransition`: ê¸´ê¸‰í•˜ì§€ ì•Šì€ state ì—…ë°ì´íŠ¸ë¡œ ê°„ì£¼í•  í•¨ìˆ˜ë¥¼ wrappingí•˜ëŠ” í•¨ìˆ˜ë¡œ, ì—¬ëŸ¬ ê°œì˜ setterë¥¼ ë„£ì„ ìˆ˜ ìˆë‹¤ (âš ï¸ propsë‚˜ ì»¤ìŠ¤í…€ í›…ì—ì„œ ë°˜í™˜í•˜ëŠ” ê°’ì„ ì‚¬ìš©í•˜ê³  ì‹¶ë‹¤ë©´ useDeferredValue í›…ì„ ì‚¬ìš©)
- ìƒìœ„ì—ì„œ propsë¡œ ë‚´ë ¤ì¤€ ìƒíƒœ ë³€ê²½ í•¨ìˆ˜ë„ `startTransition`ìœ¼ë¡œ ê°ìŒ€ ìˆ˜ ìˆë‹¤.

```javascript
import { useTransition } from "react";

export default function TabButton({ children, isActive, onClick }) {
  const [isPending, startTransition] = useTransition();
  if (isActive) {
    return <b>{children}</b>;
  }
  if (isPending) {
    return <b className="pending">{children}</b>;
  }
  return (
    <button
      onClick={() => {
        startTransition(() => {
          onClick();
        });
      }}
    >
      {children}
    </button>
  );
}
```

---

### [React] useStateì˜ setterì— ì¸ìë¡œ í•¨ìˆ˜ ë„£ê¸°

- useStateì˜ setter í•¨ìˆ˜ `setSomething()`ì— ì¸ìë¡œ ê°’ ìì²´ë§Œ ë„£ê³¤ í–ˆëŠ”ë° í•¨ìˆ˜ë¥¼ ë„˜ê¸¸ ìˆ˜ë„ ìˆë‹¤.
- í•¨ìˆ˜ì˜ íŒŒë¼ë¯¸í„°ì—ëŠ” ì´ì „ ê°’ì´ ë“¤ì–´ê°„ë‹¤.

```javascript
setCount((prev) => prev + 1);
setBoolean((old) => !old);
```

- ì°¸ê³ ë§í¬ : [here](https://velog.io/@jhyun_k/React-useState-%EC%97%90%EC%84%9C-setter-%ED%95%A8%EC%88%98%EC%97%90-%ED%8C%8C%EB%9D%BC%EB%AF%B8%ED%84%B0%EB%A5%BC-%EB%84%A3%EC%96%B4%EC%84%9C-%EC%82%AC%EC%9A%A9%ED%95%98%EA%B8%B0)

---

### [React 18] setterë¥¼ í†µí•œ ìƒíƒœ ì—…ë°ì´íŠ¸ ì¼ê´„ ì²˜ë¦¬ ì ìš©

- react 18ë¶€í„°ëŠ” ìƒíƒœ ì—…ë°ì´íŠ¸ë¥¼ ì¼ê´„ ì²˜ë¦¬í•œë‹¤

- ì°¸ê³ ë§í¬1 : https://stackoverflow.com/questions/48563650/does-react-keep-the-order-for-state-updates/48610973#48610973
- ì°¸ê³ ë§í¬2 : [here](https://velog.io/@semnil5202/useState%EC%9D%98-setter%EB%8A%94-%EC%99%9C-%EB%B9%84%EB%8F%99%EA%B8%B0%EC%A0%81%EC%9C%BC%EB%A1%9C-%EB%8F%99%EC%9E%91%ED%95%A0%EA%B9%8C)
