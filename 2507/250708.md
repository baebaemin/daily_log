## TODAY I LEARNED

### [React] í”„ë¡ íŠ¸ì—”ë“œ ì„œë¹„ìŠ¤ ìµœì í™”? í† ìŠ¤ì—ì„œëŠ” 'ì´ë ‡ê²Œ' í•©ë‹ˆë‹¤! | EP.9 ëª¨ë‹¥ë¶ˆ

- ì˜ìƒ ë§í¬ : https://toss.tech/article/firesidechat_frontend_9

- ëŸ°ì¹­ ì´í›„ ëª¨ë“ˆí™” ë° ë¶ˆí•„ìš”í•œ ë¦¬ë Œë”ë§ ì œê±° ë“± ì„±ëŠ¥ ìµœì í™” ì§„í–‰ ì¤‘ì— ë³´ê²Œ ëœ ì˜ìƒ. "í• ê¹Œ ë§ê¹Œ ìƒê°ì´ ë“ ë‹¤ë©´ í•˜ì§€ ì•ŠëŠ”ê²Œ ì¢‹ë‹¤.", "ê¼­ í•´ì•¼ê² ë‹¤ ì‹¶ì„ë•Œ í•˜ì" ë¼ëŠ” ë¬¸ì¥ìœ¼ë¡œ ì‹œì‘í•´ì„œ ì¶©ê²©ë°›ìŒ ã…ã… (í•˜ëŠ”ê²Œ ë¬´ì¡°ê±´ ì¢‹ì€ì¤„ë¡œë§Œ ì•Œì•˜ê¸° ë•Œë¬¸ì´ë‹¤)

- ì„œë¡  : ì„±ëŠ¥ ìµœì í™”ë€ FEê°œë°œìì˜ ë¡œë§ ê°™ì€ ê²ƒ â€¦ ğŸ¥¹
  - [No Silver Bullet](https://en.wikipedia.org/wiki/No_Silver_Bullet) (Trade-Off)
  - ìµœì í™”ì— ì„±ê³µí–ˆë‹¤ë©´ ë©”ëª¨ë¦¬, ì½”ë“œì˜ ì–‘, ê°œë°œìì˜ ì‹œê°„ ë“± ë¬´ì–¸ê°€ë¥¼ í¬ìƒí–ˆë‹¤ëŠ” ëœ»

### FEì—ì„œì˜ ìµœì í™”ë€?

#### 1. ì´ˆê¸° ë¡œë”© ì†ë„ë¥¼ ë¹ ë¥´ê²Œ

- a) ë²ˆë“¤ ì‚¬ì´ì¦ˆ ë° ì „ë‹¬ ë°©ì‹ ìµœì í™”

  - ìë°”ìŠ¤í¬ë¦½íŠ¸ ë²ˆë“¤ì„ ìœ ì €ì—ê²Œ ë°°ë‹¬í•´ì•¼ í•  ìŒ€ í¬ëŒ€ë¡œ ë¹„ìœ í•˜ìë©´, ëŒ€ì—­í­(LTE, 3G ë“±)ì€ í¬ëŒ€ ì˜®ê¸°ëŠ” íŠ¸ëŸ­

  - ë²ˆë“¤ ì‚¬ì´ì¦ˆë¥¼ ê·¹í•œìœ¼ë¡œ ì¤„ì´ë©´ í•˜ë‚˜ì˜ í•œ í†¨ë§Œ ì˜®ê²¨ë„ ë  ìˆ˜ë„ ìˆë‹¤. í•˜ì§€ë§Œ ê·¸ í•œ í†¨ì´ ìˆœê°„ ì´ë™ì„ í•  ìˆ˜ë„ ìˆê³  ê±°ë¶ì´ ì†ë„ë¡œ ëŠë¦¬ê²Œ ì˜¬ ìˆ˜ë„ ìˆë‹¤. ì¦‰, ì „ë‹¬ ì†ë„ëŠ” ë„¤íŠ¸ì›Œí¬ì˜ í’ˆì§ˆì— ì˜í–¥ì„ ë§ì´ ë°›ìŒ => í† ìŠ¤ì—ì„œëŠ” ë„¤íŠ¸ì›Œí¬ ì˜ì¡´ì„±ì„ ì œê±°í•´ì„œ ë¡œë”© ì†ë„ë¥¼ ê°œì„ í•˜ê¸° ìœ„í•´ React-Nativeë¥¼ ì‚¬ìš©ì¤‘
  - ë¦¬ì†ŒìŠ¤ê°€ ë¯¸ë¦¬ ìœ ì €ì˜ ëˆˆ ì•ì— ë¯¸ë¦¬ ì™€ìˆê²Œ í•˜ë ¤ë©´ ìºì‹±ì„ ì˜ í™œìš©í•˜ì
    - ì–´ë–¤ í˜ì´ì§€ë¡œ ì´ë™í•  ê²ƒ ê°™ìœ¼ë©´ pre-fetchingí•˜ê¸°
  - ë²ˆë“¤ì„ ì˜ ìª¼ê°œë©´ ìºì‹±ì— ìœ ë¦¬í•˜ë‹¤. ê¼­ í•œ ë²ˆì— ê°€ì ¸ì˜¬ í•„ìš”ë„ ì—†ë‹¤
    - ê·¸ëŸ¬ë¯€ë¡œ ìª¼ê°œëŠ” ê¸°ì¤€ì´ ì¤‘ìš”í•¨ -> ì œì¼ ë¨¼ì € ë¡œë“œë˜ì–´ì•¼ í•˜ëŠ” ë¦¬ì†ŒìŠ¤ì¸ë° ì˜ëª» ìª¼ê°œë©´ ì‚¬ìš©ì ì…ì¥ì—ì„œ ë‚˜ì¤‘ì— ë¡œë“œë¨

- b) ì§€ì—° ì‹œê°„(latency) ì¤„ì´ê¸°

  - ìš”ì²­ì„ ë³´ë‚´ê³  ì²« ë²ˆì§¸ ì‘ë‹µì„ ë°›ê¸°ê¹Œì§€ì˜ ì‹œê°„ (ëŒ€ì—­í­ê³¼ëŠ” ë³„ê°œ)
    - ë¬¼ë¦¬ì  ê±°ë¦¬, ë„¤íŠ¸ì›Œí¬ ì¸í”„ë¼, ì„œë²„ ì‘ë‹µ ì‹œê°„ ë“±ì— ì˜í–¥ì„ ë°›ìŒ
    - `CDN` í™œìš©ìœ¼ë¡œ ì§€ì—° ì‹œê°„ì„ ì¤„ì¼ ìˆ˜ ìˆìŒ

- c) ìë°”ìŠ¤í¬ë¦½íŠ¸ ì‹¤í–‰ ì‹œê°„ ì¤„ì´ê¸°
  - íŒŒì‹±(parsing): ì†ŒìŠ¤ ì½”ë“œë¥¼ `AST`(Abstract Syntax Tree)ë¡œ ë³€í™˜í•˜ëŠ” ê³¼ì •
  - ì»´íŒŒì¼(compilation): `AST`ë¥¼ ì‹¤í–‰ ê°€ëŠ¥í•œ ë°”ì´íŠ¸ì½”ë“œë¡œ ë³€í™˜
  - ì‹¤í–‰(excution): ì‹¤ì œ ì½”ë“œ ì‹¤í–‰ ë° DOM ì¡°ì‘
  - => ëª¨ë“  ë‹¨ê³„ê°€ `ë©”ì¸ ìŠ¤ë ˆë“œ`ì—ì„œ ì‹¤í–‰ë˜ë¯€ë¡œ ìµœì í™”ê°€ ì¤‘ìš”í•˜ë‹¤

#### 2. ëŸ°íƒ€ì„ ì‹œê°„ì„ ë¹ ë¥´ê²Œ

- ëŸ°íƒ€ì„ ì‹œê°„(= ìë°”ìŠ¤í¬ë¦½íŠ¸ê°€ ì‹¤í–‰ë˜ì–´ ì„œë¹„ìŠ¤ê°€ ë°˜ì‘ì„± ìˆê²Œ ë™ì‘í•˜ëŠ” ì •ë„) ì¸¡ì • ë°©ë²•

  - FPS ì´ˆë‹¹ ëª‡ í”„ë ˆì„ì„ ì¬ìƒí•  ìˆ˜ ìˆëŠ”ê°€? (ë³´í†µì€ ì‹ ê²½ì“¸ ê²½ìš°ê°€ ë§ì´ ì—†ê¸´ í•¨)
    - í¬ë¡¬ ê°œë°œì ë„êµ¬ - í›„í•œ í¸ì´ë¼ ìì²´ì ìœ¼ë¡œ ê°œë°œí•´ì„œ ë‚´ì¥ì‹œì¼œë†“ê³  ì¸¡ì •í•œë‹¤ê³  í•˜ì‹¬
    - ex. ë“œë˜ê·¸ì•¤ë“œë¡­ í•˜ëŠ” ë™ì•ˆ 60fpsê°€ ìœ ì§€ë˜ëŠ”ê°€?

- a) í”„ë¡œíŒŒì¼ëŸ¬ ì¸¡ì • ë° ë¶„ì„

  - ë…¸ë€ìƒ‰ ë§‰ëŒ€ëŠ” `ë©”ì¸ ìŠ¤ë ˆë“œ`ë¥¼ ë¸”ë½ ì¤‘ì¸ ìë°”ìŠ¤í¬ë¦½íŠ¸ ì½”ë“œê°€ ì‹¤í–‰ë˜ê³  ìˆëŠ” ì¤‘

    - ë…¸ë€ ë§‰ëŒ€ë¥¼ ì˜ê²Œì˜ê²Œ ìª¼ê°œëŠ” ê²ƒ = ì²´ê° ì„±ëŠ¥(ë°˜ì‘ì„±) ê°œì„ 

      - Aê°€ ì²˜ë¦¬ë˜ëŠ” ë™ì•ˆ ì–´ë–¤ ì¼ì´ ì¼ì–´ë‚˜ê³  ìˆëŠ”ì§€ ìœ ì €ê°€ ëŠë¼ëŠ” ë¹ ë¥´ê¸° ì •ë„
      - ex. í† ìŠ¤íŠ¸ ë©”ì„¸ì§€

    - ë…¸ë€ ë§‰ëŒ€ë¥¼ ì‘ê²Œ ë§Œë“¤ê¸° = ì‹¤ì œ ì„±ëŠ¥ ê°œì„ 
      - ì‘ì—… Aì˜ ì‹œì‘ë¶€í„° ëê¹Œì§€ ê±¸ë¦¬ëŠ” ì‹œê°„ ë‹¨ì¶•
      - ì ë‹¹í•œ ë‹¨ìœ„ë¡œ ë…¸ë“œë¥¼ chunkingí•œ ë‹¤ìŒ, ì„œë¡œ ë‹¤ë¥¸ ë¹„ë™ê¸° ìŠ¤íƒì— íƒœì›Œì„œ ì²˜ë¦¬

- b) ë¶ˆí•„ìš”í•œ ë¦¬ë Œë”ë§ ì œê±°

  - ë¶ˆí•„ìš”í•œ ìƒíƒœ ì—…ë°ì´íŠ¸ : useEffect ë‚´ì—ì„œ setStateAë¥¼ í•˜ë©´ ë˜ë‹¤ë¥¸ useEffectê°€ ë°˜ì‘í•˜ê³  â€¦ ë˜ë‹¤ë¥¸ useEffectì—ì„œ setStateBë¥¼ í•˜ë©´ ë˜ ì—…ë°ì´íŠ¸ í•˜ëŠ” â€¦ ì—°ì‡„ì ì¸ ì‘ì—…ì´ ìˆë‹¤ë©´ ë¦¬ì•¡íŠ¸ê°€ nnë²ˆì˜ ì‘ì—…ì„ í•˜ë©´ì„œ ë°˜ì‘ì„±ì´ ë§ì´ ë–¨ì–´ì§

    ```jsx
    // ë¬¸ì œê°€ ë˜ëŠ” íŒ¨í„´
    const [data, setData] = useState([]);
    const [filteredData, setFilteredData] = useState([]);
    const [filter, setFilter] = useState("");

    // dataê°€ ë³€ê²½ë  ë•Œë§ˆë‹¤ filteredDataë¥¼ ì—…ë°ì´íŠ¸
    useEffect(() => {
      setFilteredData(data.filter((item) => item.includes(filter)));
    }, [data, filter]);

    // ë˜ë‹¤ë¥¸ useEffectì—ì„œëŠ” filteredDataë¥¼ ê¸°ë°˜ìœ¼ë¡œ ë­”ê°ˆ í•¨
    useEffect(() => {
      console.log("í•„í„°ë§ ëœ ë°ì´í„°: ", filteredData);
    }, [filteredData]);
    ```

    - ì²« ë²ˆì§¸ ë¦¬ë Œë”ë§ : stateë¡œ ê´€ë¦¬ì¤‘ì¸ filterê°€ ë³€ê²½ë˜ì—ˆê¸° ë•Œë¬¸

      - ë Œë”ë§ í›„ ì²« ë²ˆì§¸ useEffectê°€ ì‹¤í–‰ë¨

    - ë‘ ë²ˆì§¸ ë¦¬ë Œë”ë§ : setFilteredData í˜¸ì¶œë¡œ stateë¡œ ê´€ë¦¬ ì¤‘ì¸ filteredData ìƒíƒœê°€ ë³€ê²½ë˜ì—ˆê¸° ë•Œë¬¸
      - ë Œë”ë§ í›„ ë‘ ë²ˆì§¸ useEffectê°€ ì‹¤í–‰ë¨

  - ê°œì„  ë°©ë²• : ì–´ë–¤ stateAê°€ ë‹¤ë¥¸ stateBë¡œë¶€í„° íŒŒìƒë˜ëŠ” ê²½ìš°ì—ëŠ”, useEffectë¥¼ í†µí•´ ì—…ë°ì´íŠ¸ë¥¼ í•˜ëŠ” ê²ƒì´ ì•„ë‹ˆë¼ stateBë¡œë¶€í„° ê³„ì‚°ëœ ê°’ì˜ ê²°ê³¼ë¥¼ stateAì—ê²Œ í• ë‹¹í•˜ê¸°. ë§Œì•½ ê³„ì‚°í•˜ëŠ”ê²Œ ì˜¤ë˜ ê±¸ë¦°ë‹¤ë©´ `useMemo`ë¥¼ ì”Œìš´ë‹¤

    ```jsx
    // ìµœì í™”ëœ ë²„ì „ :: 1ë²ˆì˜ ë¦¬ë Œë”ë§
    const [data, setData] = useState([]);
    const [filter, setFilter] = useState("");

    const filteredData = useMemo(() => {
      return data.filter((item) => item.includes(filter));
    }, [data, filter]);

    useEffect(() => {
      console.log("í•„í„°ë§ ëœ ë°ì´í„°: ", filteredData);
    }, [filteredData]);
    ```

  - c) ì»´í¬ë„ŒíŠ¸ ìì²´ì— ë©”ëª¨ë¥¼ ì”Œìš°ê¸°

    - í˜ì´ì§€ì— ë Œë”ë§ í•  ì»´í¬ë„ŒíŠ¸ ìì²´ê°€ ë§ì„ ë•Œ ë©”ëª¨ë¥¼ ì”Œì›Œì„œ ë¦¬ë Œë”ë§ì´ í•„ìš”í•œ ì»´í¬ë„ŒíŠ¸ë§Œ ë Œë”ë§ ë˜ë„ë¡ í•˜ê¸°
    - `ë©”ëª¨ì´ì œì´ì…˜` ì „ì—ëŠ” ë¶€ëª¨ê°€ ë¦¬ë Œë”ë§ë˜ë©´ ìì‹ë„ í•­ìƒ ë¦¬ë Œë”ë§ ë˜ì§€ë§Œ, `ë©”ëª¨ì´ì œì´ì…˜` í›„ì—ëŠ” propsê°€ ë³€ê²½ë  ë•Œì—ë§Œ ë¦¬ë Œë”ë§ ëœë‹¤.

  - (ì—¬ê¸°ì„œë¶€í„°ëŠ” ì˜ìƒì—” ì•ˆ ë‚˜ì™”ì§€ë§Œ ìµœì í™” ì§„í–‰í•˜ë©´ì„œ ì ìš© ì¤‘ì¸ ê¸°ë²•ë“¤ì´ë¼ ì¶”ê°€ë¡œ ì ì–´ë‘ )
  - d) í•¨ìˆ˜ì™€ ê°ì²´ `ë©”ëª¨ì´ì œì´ì…˜`

  ```jsx
  const Parent = () => {
    // ë§¤ ë Œë”ë§ë§ˆë‹¤ ìƒˆë¡œìš´ í•¨ìˆ˜ ìƒì„± -> í•¸ë“¤ëŸ¬ ì „ë‹¬ì¤‘ì¸ ìì‹ ì»´í¬ë„ŒíŠ¸ë„ ë¦¬ë Œë”ë§ë¨
    const onItemClick = (item) => {
      console.log(item);
    };

    // useCallbackìœ¼ë¡œ í•¨ìˆ˜ ë©”ëª¨ì´ì œì´ì…˜ (ê°ì²´ë„ ë™ì¼)
    const onItemClick = useCallback((item) => {
      console.log(item);
    }, []);

    return <ChildComponent onItemClick={onItemClick} >
  }
  ```

  - e) ì¡°ê±´ë¶€ ë Œë”ë§

  ```jsx
  const App = () => {
    const [isShowModal, setIsShowModal] = useState(false);

    return (
      <div>
        // isShowModalì´ falseì—¬ë„ ë Œë”ë§ ë¨ (ë¹„ì¶”)
        <CertainModal show={isShowModal} />
        // isShowModalì´ trueì¼ë•Œë§Œ ë Œë”ë§ ë¨ (êµ¿)
        {isShowModal && CertainModal />}
      </div>
    )
  }
  ```
