## Today I Learned

### [React] children ì¤‘ íŠ¹ì • ì»´í¬ë„ŒíŠ¸ì—ê²Œ ref ì—°ê²°í•˜ê¸°ğŸ¤”

- ìƒí™©: ì»´í¬ë„ŒíŠ¸ì˜ returnë¶€ì—ì„œ {children}ì„ ì‚¬ìš©ì¤‘ì´ê¸´ í•œë° ì–´ë–¤ ë…¸ë“œê°€ ë“¤ì–´ì˜¬ì§€ ëª¨ë¥´ëŠ” ìƒíƒœì—ì„œ ì²« ë²ˆì§¸ ìœ íš¨í•œ ìš”ì†Œì— refë¥¼ ìƒì„±í•´ì•¼í•¨

  ```tsx
    const CheckboxGroup = forwardRef<HTMLDivElement, CheckboxGroupProps>({ children, ...props}, outerRef) => {

    const contextValues = useMemo(() => (...), [...])
    // ...

    return (
      <div role="group" className="checkbox-group">
        <div className="checkbox-group__checklist">
          <CheckboxContext.Provider value={contextValues}>
            {/* forwardRefë¡œ ë°›ì€ outerRefë¥¼ ì´ childrenì˜ ì²« ë²ˆì§¸ ìœ íš¨í•œ ìš”ì†Œì— ë¶™ì´ê³ ì‹¶ë‹¤...  */}
            {children}
          </CheckboxContext.Provider>
        </div>
      )
    };
  ```

- ë‹¤ìŒê³¼ ê°™ì€ firstCheckboxRefë¥¼ ì‘ì„±í•œë‹¤

  ```jsx
      // ì „ë‹¬ëœ refë¡œ ì²« ë²ˆì§¸ checkboxì— í¬ì»¤ìŠ¤ë¥¼ ë§ì¶”ê¸° ìœ„í•œ handle ì„¤ì •
    const firstCheckboxRef = useMemo(() => {
      // children ì¤‘ ì²« ë²ˆì§¸ checkboxì˜ refë¥¼ ê°€ì ¸ì˜¤ê¸° ìœ„í•œ ë°°ì—´ ìƒì„±
      const refs: React.RefObject<HTMLInputElement>[] = [];

      React.Children.forEach(children, (child, index) => {
        if (React.isValidElement(child) && index === 0) {
          refs.push(React.createRef<HTMLInputElement>());
        }
      });
      return refs[0];
    }, [children]);

  ```

- íìŒ.. ê·¼ë° ë§ˆìŒì— ë“¤ì§€ ì•ŠëŠ”ë‹¤. Childì™€ isValidElementëŠ” ë ˆê±°ì‹œê°€ ë˜ì—ˆë‹¤ê³  í•˜ë‹ˆ ë‹¤ë¥¸ ë°©ë²•ì„ ì°¾ì•„ë´ì•¼ê² ë‹¤. refsë„ êµ³ì´ ë°°ì—´ì¼ í•„ìš”ëŠ” ì—†ê³  ì²« ë²ˆì§¸ Checkbox ì»´í¬ë„ŒíŠ¸ë§Œ ì°¾ìœ¼ë©´ ë  ê²ƒ ê°™ë‹¤.
