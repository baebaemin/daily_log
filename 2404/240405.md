## TODAY I LEARNED

### [Next.js] 동적 라우팅

1. 동적 라우팅으로 .../detail/{idx} URL에 접속하면 화면에 idx를 띄우려는 첫 번째 시도 (실패)

   ```typescript
   //page.tsx
   interface DetailPageProps {
     idx: string;
   }

   export default function DetailPage({ idx }: DetailPageProps) {
     return <Container idx={idx} />;
   }
   ```

   ```typescript
   //container.tsx
   interface ContainerProps {
     idx: string;
   }

   export default function Container({ idx }: ContainerProps) {
     return <div>{idx}</div>;
   }
   ```

## <br />

2. 동적 라우팅으로 .../manage/{manageId} URL에 접속하면 화면에 manageId를 띄우는 두 번째 시도 (성공)

   ```typescript
   //page.tsx
   import Container from "./container";

   interface DetailPageProps {
     params: {
       idx: string;
     };
   }

   export default function DetailPage({ params }: DetailPageProps) {
     return <Container params={params.idx} />;
   }
   ```

   ```typescript
   //container.tsx
   interface ContainerProps {
     params: {
       idx: string;
     };
   }

   export default function Container({ params }: ContainerProps) {
     return <div>{params.idx}</div>;
   }
   ```

- 문제: 후자만 manageId가 페이지에 띄워진다. 전자는 왜 띄워지지 않았을까 ...?

- 원인: Next.js 13+ App Router에서 동적 라우팅 파라미터는 페이지 컴포넌트(page.tsx)에 `params` 객체 형태로 자동 주입된다. 전자의 코드는 `params` 객체를 받지 않고 idx를 직접 props로 받으려고 했기 때문에 동작하지 않았던 것!

- Next.js 13+ 이전에는 동적 라우팅 파라미터를 컴포넌트에 전달하려면, getServerSideProps 또는 getStaticProps 함수를 사용하여 빌드 타임(또는 요청 시)에 필요한 데이터를 미리 불러오고, 이를 페이지 컴포넌트의 props로 전달해야 한다. [Next.js 13부터는 app router 사용시 getServerSideProps를 작성할 필요가 없음 ^ㅡ^](/2407/240703.md#nextjs-next13--react18부터-달라진-것)

- 동적 라우팅 참고 링크 : https://velog.io/@c_h_hyuk/Next.js-14-%EC%8B%9C%EC%9E%91%ED%95%98%EA%B8%B0-2-Nested-Dynamic-Routing

## <br />

### [JavaScript] className과 표현식

- 문제 : `boolean` type인 `isCompleted`의 값에 따라 className이 `test--completed` 또는 `test`가 적용되길 바랐다. 하지만 `inCompleted`가 `true`일 때만 적용됐다.
- 문제의 코드 :

  ```javascript
  //test.jsx
  <p
    className={cx(
      `test${isCompleted && "--completed"}`,
    )}
  >
  ```

  ```scss
  //test.module.scss
  &test {
    display: flex;
    flex-direction: column;
    width: 560px;

    &--completed {
      color: $gray080;
      filter: grayscale(100%);
    }
  }
  ```

- 원인 : `isCompleted`가 `false`일 경우, className은 `test--false`가 되어버린다.😱
- 해결 방법 : 삼항 연산자로 false 대신 빈 문자열을 return하자.

```javascript
  <p
    className={cx(
      `test${isCompleted ? "--completed" : ""}`,
    )}
  >
```
