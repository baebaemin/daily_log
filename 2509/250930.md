## Today I Learned

### [React] useEffect의 첫 번째 인자는 일반(동기) 함수여야 한다

```tsx
// useEffect의 첫 번째 인자: 일반(동기) 화살표 함수
useEffect(() => {
  // async(비동기) 함수를 중첩(nested)으로 선언
  async function fetchPosts() {
    // fetch() 기다림
    const response = await fetch("http://localhost:8080/posts");
    // response.json() 기다림
    const resData = await response.json();
    // React의 상태 업데이트 함수는 동기적으로 실행 (호출만 하고 완료, 기다리지 않음)
    setPosts(resData.posts);
  }
  fetchPosts(); // 선언한 비동기 함수 호출 : 종료시 Promise<undefined> 반환
}, []);
```

```tsx
// 이렇게 하면 안됨
useEffect(async () => {
  const response = await fetch("http://localhost:8080/posts");
  const resData = await response.json();
  setPosts(resData.posts);
}, []);
```

- useEffect의 콜백 함수는 cleanup 함수를 반환하거나 아무것도 반환하지 않아야 하는데, async 함수는 항상 Promise를 반환하기 때문에 Error 발생
