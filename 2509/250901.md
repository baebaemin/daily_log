## TODAY I LEARNED

### [git] 이미 push한 커밋을 --amend 했을 때 ...

- commit 생성을 건너뛰고 --amend를 해버렸다. 결국 원격의 최신 커밋과 로컬의 최신 커밋이 동일한 내용임에도 로컬의 최신 커밋의 해시값이 바뀌어버려서 push도 안 되고, pull을 했더니 merge conflict가 났다

```markdown
> 최신상태에서 변경사항 add
> 원격: A ── B (origin/feature-branch)
> 로컬: A ── B (HEAD) pushed

Changes: [staged] (git add .)
```

```markdown
> commit 생성 없이 --amend 실행 ...
> 원격: A ── B (origin/feature-branch)
> 로컬: A ── C (HEAD) ⚠️ amend된 커밋 (해시 변경!)

B ≠ C (같은 내용, 다른 해시)
```

```markdown
> 바뀐 해시 push 시도 → rejected
> 원격: A ── B
> 로컬: A ── C (HEAD)

Push하면 Remote에 B 커밋이 있는데 Local에는 없기 때문에 REJECTED 됨 (non-fast-forward)
```

```markdown
> pull 실행
> After pull attempt:

        ┌─ B ────╱   (from 원격)
        │

로컬: A ── C ── M💥 (merge commit 시도 => CONFLICT)
```

- 혼자 개발중인 브랜치이므로 git push `--force-with-lease origin feature/...` 명령어를 사용해 안전하게 force push를 했다면 괜찮았을텐데^ㅡ^ ... pull을 해버려서 한땀한땀 conflict를 수정했다. 그러다가 current change만 accept하면 되는거라 편한 방법을 찾았다

  - 모든 current change를 accept 하기 : `git checkout --ours .`
  - 열고 있는 파일의 current change만 accept하고 싶으면 `command + shift + p > Merge Conflict: Accept All Current`
