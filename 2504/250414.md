## Today I Learned

### [React] ì˜ì¡´ì„± ë°°ì—´ì— ê°ì²´ë¥¼ ì¶”ê°€í•˜ëŠ” ê¸°ì¤€ : ê°ì²´ ì°¸ì¡°ê°’ì˜ ë³€ê²½ ì—¬ë¶€

```tsx
// useMemoë¡œ api í˜¸ì¶œì‹œ ì‚¬ìš©í•  paramsë¥¼ ìƒì„±í•˜ëŠ” ë¡œì§
export function useParams(code: string) {
  const { params } = useListParamsStore();
  const searchParams = useSearchParams();

  return useMemo(() => {
    const requestData: ListRequest = {
      ...params.requestData,
      processTypeCd: code,
    };

    const pageableData: Pageable = {
      ...params.pageableData,
      page: Math.max(Number(searchParams.get("page")) - 1, 0),
    };

    return {
      requestData,
      pageableData,
    } as const;
  }, [params.requestData, params.pageableData, searchParams, code]);
}
```

- params ê°ì²´ì˜ êµ¬ì„± ìš”ì†ŒëŠ” requestDataì™€ pageableDataê°€ ì „ë¶€ì´ê¸°ì— ì˜ì¡´ì„±ë°°ì—´ì— `params.requestData, params.pageableData`ë¥¼ ìƒëµí•˜ì—¬ `params`ë§Œ ë„£ì–´ë„ ë˜ì§€ ì•Šì„ê¹Œ ê¶ê¸ˆí•´ì¡Œë‹¤.

```ts
// params ê°ì²´ì˜ êµ¬ì„± ìš”ì†Œ
const params = {
  requestData: { ... },
  pageableData: { ... },
}
```

- í•˜ì§€ë§Œ `params.requestData, params.pageableData`ë¥¼ `params`ë¡œ ìƒëµ ê°€ëŠ¥í•œì§€ë¥¼ ë”°ì ¸ë³´ë ¤ë©´ params.requestData.someKeyì˜ ê°’ì´ ë³€ê²½ë˜ì—ˆì„ ë•Œ paramsê°€ "ìƒˆë¡œ ìƒì„±ë˜ê³  ìˆëŠ”ì§€" í™•ì¸í•´ì•¼í•œë‹¤.

- Reactì˜ ì˜ì¡´ì„± ë°°ì—´ì€ ì–•ì€ ë¹„êµë§Œ ìˆ˜í–‰í•˜ê¸° ë•Œë¬¸ì— ê°ì²´ë‚˜ ë°°ì—´ì˜ ì°¸ì¡°ê°’ë§Œ ë¹„êµí•˜ê³ , ë‚´ë¶€ ì†ì„±ë“¤ì˜ ê°’ê¹Œì§€ ì¬ê·€ì ìœ¼ë¡œ ë¹„êµí•˜ì§€ ì•ŠëŠ”ë‹¤. ì¦‰, ë³€ê²½ ì—¬ë¶€ë¥¼ ëª¨ë¥´ê¸° ë•Œë¬¸ì´ë‹¤.

- `ìƒˆë¡œ ìƒì„±ëœë‹¤?`ëŠ” í‘œí˜„ì€, ê°ì²´ì˜ ì°¸ì¡°ê°’ì´ ë³€ê²½ë˜ì—ˆë‹¤ëŠ” ëœ». ê°ì²´ì˜ ì†ì„±ë“¤ì˜ ê°’ì´ ë™ì¼í•´ë„ ì°¸ì¡°ê°’ì´ ë°”ë€Œì—ˆë‹¤ë©´ ìƒˆë¡œ ìƒì„±ë˜ì—ˆë‹¤ê³  ë³¼ ìˆ˜ ìˆë‹¤.

```js
// ìƒˆë¡œ ìƒì„± CASE 1: ê°ì²´ ì „ì²´ê°€ ìƒˆë¡œ ìƒì„±ë˜ëŠ” ê²½ìš°
function Component() {
  // ë§¤ ë Œë”ë§ë§ˆë‹¤ paramsëŠ” ìƒˆë¡œìš´ ê°ì²´(= ìƒˆë¡œìš´ ë©”ëª¨ë¦¬ ì£¼ì†Œ)ê°€ ëœë‹¤ !
  const params = {
    requestData: { type: "A" },
    pageableData: { page: 1 },
  };

  useEffect(() => {
    // paramsê°€ ë§¤ë²ˆ ìƒˆë¡œ ìƒì„±ë˜ë¯€ë¡œ ì´ íš¨ê³¼ëŠ” ë§¤ ë Œë”ë§ë§ˆë‹¤ ì‹¤í–‰ë¨
  }, [params]);
}

// ìƒˆë¡œ ìƒì„± CASE 2: ê°ì²´ì˜ ì†ì„±ë§Œ ë³€ê²½ë˜ëŠ” ê²½ìš°
function Component() {
  const [params, setParams] = useState({
    requestData: { type: "A" },
    pageableData: { page: 1 },
  });

  const updateType = () => {
    // setterë¡œ ë¶ˆë³€ì„±ì„ ì§€í‚¤ë©° ê°ì²´ ì†ì„± ì—…ë°ì´íŠ¸
    setParams((prev) => ({
      // ìƒˆ ê°ì²´ ìƒì„±
      requestData: {
        ...prev.requestData,
        type: "B", // typeë§Œ ë³€ê²½
      },
    }));
  };
}
```

- paramsëŠ” useStateëŠ” ì•„ë‹ˆì§€ë§Œ Zustandì˜ storeì— ì €ì¥í•œ ê°ì²´ì´ê¸° ë•Œë¬¸ì—, ë‚´ë¶€ ì†ì„±ì´ ë°”ë€Œë©´ params ê°ì²´ ìì²´ë„ ìƒˆ ì°¸ì¡°ê°’ì„ ê°–ê²Œ ëœë‹¤. ZustandëŠ” ìƒíƒœê°€ ì—…ë°ì´íŠ¸ë  ë•Œ ìƒˆë¡œìš´ ê°ì²´ë¥¼ ìƒì„±í•˜ê¸° ë•Œë¬¸ì´ë‹¤. ë”°ë¼ì„œ ì´ì™€ ê°™ì€ í™•ì¸ì„ ê±°ì³ `params.requestData, params.pageableData`ë¥¼ ìƒëµí•˜ì—¬ `params`ë§Œ ì‘ì„±í•˜ë„ë¡ ìˆ˜ì •í–ˆë‹¤. ğŸ‘

## <br />

### [React] ë¶ˆë³€í•˜ê²Œ(immutable) ... ì—…ë°ì´íŠ¸ í•œë‹¤ ? ğŸ§

- `"immutable update"`ë¼ëŠ” ë§ì´ í—·ê°ˆë¦¬ê¸°ë„ í•˜ê³  ëª¨ìˆœì ìœ¼ë¡œ ë“¤ë ¤ì„œ ì°¾ì•„ë³´ì•˜ë‹¤. ì²˜ìŒì—” ì°¸ì¡°ê°’ì„ ìœ ì§€í•˜ë©´ì„œ ì—…ë°ì´íŠ¸í•œë‹¤ëŠ” í‘œí˜„ì¸ì¤„ ì•Œì•˜ëŠ”ë° ì •ë°˜ëŒ€ì˜€ë‹¤. ì‹¤ì œë¡œëŠ” "ê¸°ì¡´ ê°ì²´ë¥¼ ì§ì ‘ ìˆ˜ì •í•˜ì§€ ì•Šê³ (= immutable), ìƒˆë¡œìš´ ê°ì²´ë¥¼ ìƒì„±í•˜ì—¬ ëŒ€ì²´í•œë‹¤" ë¼ëŠ” ì˜ë¯¸ì˜€ë‹¤.

- ìœ„ì— ì •ë¦¬í•œëŒ€ë¡œ, Reactê°€ ë³€í™”ë¥¼ ê°ì§€í•  ìˆ˜ ìˆë„ë¡ í•­ìƒ ìƒˆë¡œìš´ ê°ì²´ë¥¼ ìƒì„±í•˜ì—¬ ì„œë¡œ ë‹¤ë¥¸ ë©”ëª¨ë¦¬ ì£¼ì†Œë¥¼ ê°–ë„ë¡ ê°ì²´ì˜ ë‚´ë¶€ ê°’ì„ ë³€ê²½í•˜ì

```jsx
// CASE 1. immutable update ì•„ë‹Œ ê²½ìš° (ì°¸ì¡°ëŠ” ìœ ì§€ë˜ì§€ë§Œ ì§ì ‘ ìˆ˜ì •)
const updateA = () => {
  const paramsCopy = params; // ì°¸ì¡°
  paramsCopy.requestData.type = "B"; // ì§ì ‘ ìˆ˜ì •
  setParams(paramsCopy); // ì°¸ì¡°ê°’ ë™ì¼
};

// CASE 2. immutable update (ì™„ì „íˆ ìƒˆ ê°ì²´ ìƒì„±)
const updateB = () => {
  setParams({
    // ìƒˆ ê°ì²´ ìƒì„±
    ...params,
    requestData: {
      ...params.requestData,
      type: "B",
    },
  });
};
```

- ì°¸ê³  ë§í¬ : https://isaac-christian.tistory.com/entry/React-%EB%B6%88%EB%B3%80%EC%84%B1%EC%9D%B4%EB%9E%80-%EB%AC%B4%EC%97%87%EC%9D%B4%EA%B3%A0-%EC%99%9C-%EC%A7%80%EC%BC%9C%EC%95%BC-%ED%95%A0%EA%B9%8C
