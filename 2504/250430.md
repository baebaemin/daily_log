## Today I Learned

### [React] λ¬΄μ΅°κ±΄μ μΈ `"use client"`λ¥Ό μ§€μ–‘ν•΄μ•Ό ν•λ” μ΄μ 

κ²½κ³„(boundary)λ¥Ό λ§λ“λ” `"use client"`λ” μ„ μ–Έλ νμΌκ³Ό κ·Έ μ•„λμ λ¨λ“  importλ μ»΄ν¬λ„νΈλ¥Ό ν΄λΌμ΄μ–ΈνΈ λ²λ“¤μ— ν¬ν•¨μ‹ν‚¤κ² λλ‹¤. κ·Έλ¬λ‚ λ§μ•½ λ¬΄λ¶„λ³„ν•κ² μ‚¬μ©ν•λ‹¤λ©΄ ..

#### 1. μ„λ²„ μ»΄ν¬λ„νΈμ μ΄μ μ΄ μ‚¬λΌμ§

- μ„λ²„ μ»΄ν¬λ„νΈλ” ν΄λΌμ΄μ–ΈνΈλ΅ JS λ²λ“¤μ„ μ „μ†΅ν•μ§€ μ•λ”λ‹¤λ” μ„±λ¥μƒ μ΄μ μ΄ μλ‹¤. => λ¶ν•„μ”ν•κ² `"use client"`λ¥Ό μ„ μ–Έν•λ©΄ μ„λ²„μ—μ„ λ λ”λ§λ  μ μλ” μ»΄ν¬λ„νΈκ°€ ν΄λΌμ΄μ–ΈνΈμ—μ„ λ λ”λ§λμ–΄ λ²λ“¤ ν¬κΈ°κ°€ μ»¤μ§€κ³  μ΄κΈ° λ΅λ”© μ†λ„κ°€ λλ ¤μ§„λ‹¤

#### 2. λ°μ΄ν„° νλ¦„μ μµμ ν™”κ°€ μ ν•λ¨

- μ„λ²„ μ»΄ν¬λ„νΈλ” μ„λ²„μ λ°μ΄ν„°μ— μ§μ ‘ μ ‘κ·Όν•  μ μμ–΄ μ¶”κ°€ API νΈμ¶μ΄ ν•„μ” μ—†λ‹¤. `"use client"`λ¥Ό μ‚¬μ©ν•λ©΄ μ΄λ° μ§μ ‘ μ ‘κ·Όμ΄ λ¶κ°€λ¥ν•΄μ Έ λ°μ΄ν„° νμΉ­μ„ μ„ν• μ¶”κ°€ μ½”λ“κ°€ ν•„μ”ν•λ‹¤.

#### 3. μ¤‘μ²©λ μ»΄ν¬λ„νΈ κµ¬μ΅°μ—μ„ λΉ„ν¨μ¨μ μ„

- ν•λ‚μ μƒμ„ μ»΄ν¬λ„νΈκ°€ `"use client"`λ¥Ό μ‚¬μ©ν•λ©΄, κ·Έ ν•μ„μ λ¨λ“  μ»΄ν¬λ„νΈλ“¤λ„ ν΄λΌμ΄μ–ΈνΈμ—μ„ μ‹¤ν–‰λλ‹¤. λ”°λΌμ„ ν΄λΌμ΄μ–ΈνΈ κΈ°λ¥μ΄ ν•„μ”ν• κ²½μ°, ν•΄λ‹Ή κΈ°λ¥μ„ μ‚¬μ©ν•λ” μµν•μ„ μ»΄ν¬λ„νΈμ—λ§ `"use client"`λ¥Ό μ μ©ν•λ” κ²ƒμ΄ ν¨μ¨μ μ΄λ‹¤. (= μ„λ²„λ‹¨κ³Ό ν΄λΌμ΄μ–ΈνΈλ‹¨ μ‚¬μ΄μ boundaryλ¥Ό κΈ‹κΈ°)

#### 4. ν•μ΄λ“λ μ΄μ… λΉ„μ©μ΄ μ¦κ°€ν•¨

- ν΄λΌμ΄μ–ΈνΈ μ»΄ν¬λ„νΈλ” λΈλΌμ°μ €μ—μ„ ν•μ΄λ“λ μ΄μ… κ³Όμ •μ„ κ±°μ³μ•Ό ν•λ‹¤. λ¶ν•„μ”ν• `"use client"` μ„ μ–Έμ€ ν•μ΄λ“λ μ΄μ…ν•΄μ•Ό ν•  μ»΄ν¬λ„νΈ μλ¥Ό μ¦κ°€μ‹μΌ μ²« νμ΄μ§€ μΈν„°λ™μ… κ°€λ¥ μ‹κ°„(TTI)μ„ μ§€μ—°μ‹ν‚¨λ‹¤. (= ν΄λΌμ΄μ–ΈνΈλ‹¨ λ²”μ„κ°€ μ μΌλ©΄ μ μ„μλ΅ ν•μ΄λ“λ μ΄μ…ν•  μ»΄ν¬λ„νΈ λ²”μ„κ°€ μΆμ)

#### 5. μ„λ²„-ν΄λΌμ΄μ–ΈνΈ κ²½κ³„κ°€ λ³µμ΅ν•΄μ§

- λ¨λ“  μ»΄ν¬λ„νΈμ— `"use client"`λ¥Ό μ‚¬μ©ν•λ©΄ μ»΄ν¬λ„νΈ κ°„ λ°μ΄ν„° μ „λ‹¬ μ‹ μ§λ ¬ν™” λ¬Έμ κ°€ λ°μƒν•  κ°€λ¥μ„±μ΄ λ†’μ•„μ§„λ‹¤. [(κ΄€λ ¨ warning)](/2504/250417.md#nextjs-props-must-be-serializable-for-components-in-the-use-client-entry-file)

```hs
CASE 1

  [AS-IS]

μ„λ²„ μ»΄ν¬λ„νΈ
γ„΄ β€use clientβ€ μ„ μ–Έ μ»΄ν¬λ„νΈ (ν΄λΌμ΄μ–ΈνΈ λ΅μ§ μμ)
γ„΄ γ„΄ β€use clientβ€ μ„ μ–Έ μ»΄ν¬λ„νΈ (ν΄λΌμ΄μ–ΈνΈ λ΅μ§ μμ)
γ„΄ γ„΄ γ„΄ β€use clientβ€ μ„ μ–Έ μ»΄ν¬λ„νΈ (ν΄λΌμ΄μ–ΈνΈ λ΅μ§ μμ)

  [TO-BE]

μ„λ²„ μ»΄ν¬λ„νΈ
γ„΄ β€use clientβ€ μ„ μ–Έ μ»΄ν¬λ„νΈ (ν΄λΌμ΄μ–ΈνΈ λ΅μ§ μμ)
<!-- ν•μ„μ λ¨λ“  μ»΄ν¬λ„νΈλ“¤μ€ μλ™μΌλ΅ ν΄λΌμ΄μ–ΈνΈ μ»΄ν¬λ„νΈλ΅ μ·¨κΈ‰ -->
γ„΄ γ„΄ μ»΄ν¬λ„νΈ (ν΄λΌμ΄μ–ΈνΈ λ΅μ§ μμ)
γ„΄ γ„΄ γ„΄ μ»΄ν¬λ„νΈ (ν΄λΌμ΄μ–ΈνΈ λ΅μ§ μμ)
```

```hs
CASE 2

  [AS-IS]

μ„λ²„ μ»΄ν¬λ„νΈ
γ„΄ β€use clientβ€ μ„ μ–Έ μ»΄ν¬λ„νΈ (ν΄λΌμ΄μ–ΈνΈ λ΅μ§ μ—†μ)
γ„΄ γ„΄ β€use clientβ€ μ„ μ–Έ μ»΄ν¬λ„νΈ (ν΄λΌμ΄μ–ΈνΈ λ΅μ§ μ—†μ)
γ„΄ γ„΄ γ„΄ β€use clientβ€ μ„ μ–Έ μ»΄ν¬λ„νΈ (ν΄λΌμ΄μ–ΈνΈ λ΅μ§ μμ)

  [TO-BE]

μ„λ²„ μ»΄ν¬λ„νΈ
γ„΄ μ»΄ν¬λ„νΈ (ν΄λΌμ΄μ–ΈνΈ λ΅μ§ μ—†μ)
γ„΄ γ„΄ μ»΄ν¬λ„νΈ (ν΄λΌμ΄μ–ΈνΈ λ΅μ§ μ—†μ)
<!-- ν΄λΌμ΄μ–ΈνΈ λ΅μ§μ΄ μ—†λ” μ»΄ν¬λ„νΈλ“¤κΉμ§€ μ„λ²„μ—μ„ λ λ”λ§λ¨ -->
γ„΄ γ„΄ γ„΄ β€use clientβ€ μ„ μ–Έ μ»΄ν¬λ„νΈ (ν΄λΌμ΄μ–ΈνΈ λ΅μ§ μμ)
```

#### π‘‰ μ–Έμ  μ„ μ–Έν•λ” κ²ƒμ΄ μΆ‹μ„κΉ?

1. λΈλΌμ°μ € API(window, document λ“±)μ— μ ‘κ·Όν•΄μ•Ό ν•λ” κ²½μ°
2. μƒνƒ(useState, useReducer λ“±)λ‚ μ΄ν™νΈ(useEffect λ“±)λ¥Ό μ‚¬μ©ν•΄μ•Ό ν•λ” κ²½μ°
3. μ΄λ²¤νΈ ν•Έλ“¤λ¬κ°€ ν•„μ”ν• κ²½μ°
4. ν΄λΌμ΄μ–ΈνΈ μ „μ© λΌμ΄λΈλ¬λ¦¬λ¥Ό μ‚¬μ©ν•΄μ•Ό ν•λ” κ²½μ°
