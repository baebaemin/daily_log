## Today I Learned

### [TIL-WORDS]

- `sanitize` : 소독하다

### [JavaScript] Proxy

- Standard built-in objects

- Proxy object는 해당 object를 intercept해서 기능적 작동을 재정의할 수 있도록 해준다

  - 'intercept가로챈다'는 표현이 어색한디, 객체에 대한 기본 동작 - 속성 읽기, 쓰기, 삭제 등 - 을 가로채서 개입할 수 있다는 의미
  - 비서나 대리인처럼 👔 원본 객체 앞에서 모든 접근을 먼저 받아내는 역할

- 일반적으로 property 접근 로깅(디버깅, 사용자 행동 분석, API 호출 추적), input 입력값 접근(폼 입력 validation, API 요청 데이터 검증), 포맷 변경/정제(XSS 방지, SQL Injection 방지, 사용자 입력 정규화) 등의 용도로 사용된다.

```js
// 원본 객체
const user = {
  name: "고구마",
  id: 0892
};

// 1. 기본 접근
console.log(user.name); // 그냥 바로 접근 => "고구마" 출력
user.id = 876; // 바로 변경

// Proxy로 감싸기
const userProxy = new Proxy(user, {
  // get 트랩: 속성을 읽을 때 가로챔
  get(target, property) {
    console.log(`${property}을 읽으려고 합니다`);
    return target[property];
  }

  // set 트랩: 속성을 쓸 때 가로챔
  set(target, property, value) {
    console.log(`${property}를 ${value}으로 변경하려고 합니다`);
    if (typeof property !== "number") {
      throw new Error("id는 number type이어야 합니다!")
    }
    target[property] = value;
    return true;
    }
  }

  // 2. Proxy로 감싼 객체에 접근
  console.log(user.name); // "name을 읽으려고 합니다" => "고구마" 순으로 출력
  user.id = 876; // "id를 876으로 변경하려고 합니다" => 출력 후 id 변경
)
```

- Intercept할 수 있는 동작들
  - get: 속성 읽기
  - set: 속성 쓰기
  - deleteProperty: 속성 삭제
  - has: `in` 연산자
  - apply: 함수 호출
  - 등등 ...
